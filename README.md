[üá¨üáß English](README_EN.md) | [üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞](README.md)

# üìò SPA-Router
 üß≠ –õ–µ–≥–∫–∏–π SPA-—Ä–æ—É—Ç–µ—Ä –Ω–∞ JavaScript ‚Äî –±–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é history —ñ hash —Ä–µ–∂–∏–º—ñ–≤, –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –º–∞—Ä—à—Ä—É—Ç—É, query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Ç–∞ –¥–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å.

---

# üì¶ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SPA-—Ä–æ—É—Ç–µ—Ä–∞

–¶–µ–π —Ä–æ—É—Ç–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥–≤–∞ —Ä–µ–∂–∏–º–∏:  
- `history` ‚Äî –≥–∞—Ä–Ω–∏–π –¥–ª—è "—á–∏—Å—Ç–∏—Ö" URL (`/page/1`)  
- `hash` ‚Äî –ø—Ä–∞—Ü—é—î –Ω–∞–≤—ñ—Ç—å –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –±–µ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (`#/page/1`)



## üîß –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

```js
Router.config({
  mode: 'history', // –∞–±–æ 'hash'
  root: '/app/'    // —è–∫—â–æ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–µ –≤ –∫–æ—Ä–µ–Ω—ñ —Å–∞–π—Ç—É
}).listen();
```



## ‚û°Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤
–î–æ–¥–∞–≤–∞–Ω–Ω—è:

```js
Router.add(/^$/, () => {
  console.log('–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞');
});

Router.add(/^about$/, () => {
  console.log('–ü—Ä–æ –Ω–∞—Å');
});

Router.add(/^user\/(\d+)$/, function(id) {
  console.log(`–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ ID: ${id}`);
  console.log('Query:', this.query);
});
```

–í–∏–¥–∞–ª–µ–Ω–Ω—è:

```js
Router.remove(/^about$/);
```

–°–∫–∏–¥–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤:

```js
Router.flush();
```

---

## üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è

```js
Router.navigate('about');          // –ü–µ—Ä–µ–π—Ç–∏ –¥–æ /about
Router.navigate('user/42?tab=1');  // –ü–µ—Ä–µ–π—Ç–∏ –¥–æ /user/42?tab=1
Router.navigate('home', false);    // –ó–∞–º—ñ–Ω–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é, –∞ –Ω–µ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å
```

---

## üîÅ –î–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å

–ü—Ä–∞—Ü—é—î –∑ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Ç–∏–ø—É:

```html
<a href="/about" data-route>–ü—Ä–æ –Ω–∞—Å</a>
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –∫–ª—ñ–∫ —ñ –≤–∏–∫–ª–∏–∫–∞—î `Router.navigate()`.

---

## üîÑ –ü—Ä–æ–∫—Ä—É—Ç–∫–∞

- –ü–æ–∑–∏—Ü—ñ—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö (`history` mode)
- –Ø–∫—â–æ –≤ URL —î `#section`, –±—É–¥–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞:

```html
<a href="/docs#section2" data-route>–°–µ–∫—Ü—ñ—è 2</a>
```

---

## üìú –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ scroll restoration

–ü—ñ–¥ —á–∞—Å –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø–æ–∑–∏—Ü—ñ—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —á–µ—Ä–µ–∑ `history.replaceState({ scroll })`.

---

## ‚öôÔ∏è –û—Ç—Ä–∏–º–∞–Ω–Ω—è query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

```js
const params = Router.getParams(); // { tab: '1', sort: 'name' }
```

–£—Å–µ—Ä–µ–¥–∏–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∞:

```js
Router.add(/^page$/, function() {
  console.log(this.query); // –ù–∞–ø—Ä–∏–∫–ª–∞–¥: { filter: 'active' }
});
```

---

## üîº –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —É URL

```js
Router.update('page', 2); // –ó–º—ñ–Ω–∏—Ç—å URL –Ω–∞ ?page=2 –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
```

---

##  ‚Ü©Ô∏è –°–∫–∏–¥–∞–Ω–Ω—è —Ä–æ—É—Ç–µ—Ä–∞

```js
Router.flush(); // –û—á–∏—â–∞—î –º–∞—Ä—à—Ä—É—Ç–∏, —Ä–µ–∂–∏–º —ñ root
```

---

## üîç –Ø–∫ –ø—Ä–∞—Ü—é—î `check()`

–ú–µ—Ç–æ–¥ `check()` ‚Äî —Ü–µ —è–¥—Ä–æ —Ä–æ—É—Ç–µ—Ä–∞. –í—ñ–Ω:

1. –û—Ç—Ä–∏–º—É—î –ø–æ—Ç–æ—á–Ω–∏–π —à–ª—è—Ö —á–µ—Ä–µ–∑ `getFragment()`
2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î –π–æ–≥–æ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –∫–æ–∂–Ω–æ–º—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤–∏—Ä–∞–∑—É –º–∞—Ä—à—Ä—É—Ç—É
3. –Ø–∫—â–æ —î –∑–±—ñ–≥:
   - –í–∏–∫–ª–∏–∫–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫
   - –ü–µ—Ä–µ–¥–∞—î –π–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑ URL (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ID)
   - –í—Å–µ—Ä–µ–¥–∏–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–π `this.query` ‚Äî –æ–±'—î–∫—Ç query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
4. –Ø–∫—â–æ —î `#hash`, –≤–∏–∫–æ–Ω—É—î –ø—Ä–æ–∫—Ä—É—Ç–∫—É –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º `id`

```js
Router.check(); // –≤—Ä—É—á–Ω—É –≤–∏–∫–ª–∏–∫–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –º–∞—Ä—à—Ä—É—Ç—É
```

–¶–µ–π –º–µ—Ç–æ–¥ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö —ñ –∑–º—ñ–Ω—ñ URL.

---

## ‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```js
Router.config({ mode: 'history', root: '/' }).listen();

Router
  .add(/^$/, () => app.innerHTML = '<h1>–ì–æ–ª–æ–≤–Ω–∞</h1>')
  .add(/^about$/, () => app.innerHTML = '<h1>–ü—Ä–æ –Ω–∞—Å</h1>')
  .add(/^user\/(\d+)$/, function(id) {
    app.innerHTML = `<h1>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á #${id}</h1><p>Query: ${JSON.stringify(this.query)}</p>`;
  });
```

HTML:

```html
<nav>
  <a href="/" data-route>–ì–æ–ª–æ–≤–Ω–∞</a>
  <a href="/about" data-route>–ü—Ä–æ –Ω–∞—Å</a>
  <a href="/user/10?tab=info" data-route>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á 10</a>
</nav>

<div id="app"></div>
```

---


## ‚ö†Ô∏è –ó–∞—É–≤–∞–∂–µ–Ω–Ω—è

- –£ —Ä–µ–∂–∏–º—ñ `history` —Å–µ—Ä–≤–µ—Ä –º–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ `index.html` –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ —à–ª—è—Ö—É (SPA fallback).
- –î–ª—è `hash` —Ä–µ–∂–∏–º—É —Ü–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ.
- –Ø–∫—â–æ `path === this.getFragment()` ‚Äî –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è.

---

## üõ† –†–µ–∂–∏–º fallback –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, nginx)

```nginx
location / {
    try_files $uri /index.html;
}
```
